<!doctype html>
<html lang='it'>
<head>
  <title>TEST GEOLOCALIZZAZIONE</title>
  <script src="http://maps.google.com/maps/api/js?sensor=true"></script>


  <script>
    if (navigator.geolocation) {
      
      function mia_posizione(position) {
        var lat = position.coords.latitude;
        var lon = position.coords.longitude;
        document.getElementById('posizione').innerHTML = 'La tua posizione: ' + lat + ', ' + lon;  
      }

      function mostra_mappa(posizione) {
        // identifico il punto in cui è stato individuato l'utente
        var punto = new google.maps.LatLng(posizione.coords.latitude, posizione.coords.longitude),
        // definisco una serie di opzioni          
        opzioni = {
          zoom: 15,
          center: punto,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        },
        // definisco l'elemento della pagina che ospiterà la mappa
        contenitore = document.getElementById("mia_mappa"),
        // creo la mappa
        mappa = new google.maps.Map(contenitore, opzioni),
        // imposto un marker
        marker = new google.maps.Marker({
          position: punto,
          map: mappa,
          title: "Tu sei qui!"
        });
      }

      navigator.geolocation.getCurrentPosition( mia_posizione );

      navigator.geolocation.getCurrentPosition( mostra_mappa );

    }else{
      alert("GEO NON DISPONIBILE");
    }



  </script>
  
  <style>
    p {
      text-align: center;
       margin-left:auto;
       margin-right:auto;
       padding-top:  : 50%;
       
   
    }

    div#mia_mappa {
  width: 500px;
  height: 300px;
  margin: 10px auto;
}

    
  
  </style>

</head>
<body>
  <p> TEST DI GEOLOCALIZZAZIONE </p>
  <p id="posizione"></p>
  <div id="mia_mappa">Attendere prego...</div>
</body>
</html>